<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta
            name="viewport"
            content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
    />
    <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
    />
    <title>Title</title>
    <link rel="stylesheet" href="/css/ui.css"/>
    <link rel="stylesheet" href="/css/storeDetail.css"/>
</head>
<body>
<div class="app-body">
    <div class="content">
        <script
                type="text/javascript"
                src="//dapi.kakao.com/v2/maps/sdk.js?appkey=e9f0b153df219037e9402a0154f2ca62&libraries=services"
        ></script>
        <div class="container">
            <div class="store-like-back">
                <a href="javascript:history.back();">‚óÄ</a>
                <span>üíñ</span>
            </div>
            <h3>
                <div th:text="${list.storeName}" class="store-detail-name">Í∞ÄÍ≤åÎ™Ö</div>
            </h3>
            <div class="edit-remove-btnBox" th:if="${session.nowLogin}==${list.userId}"  >
                <a th:href="@{/store/editView(storeId=${list.storeId})}">ÏàòÏ†ï</a>
                <a th:href="@{/store/delete(storeId=${list.storeId})}">ÏÇ≠Ï†ú</a
                ><br/>
            </div>
            <div
                    th:if="${list.storeImagePath != '' || list.storeImagePath != null}"
            >
                <img
                        th:src="@{|${list.storeImagePath}|}"
                        class="store-image"
                        alt="Í∞ÄÍ≤å ÎåÄÌëú Ïù¥ÎØ∏ÏßÄ"
                />
            </div>
            <div class="address-phone-box">
                <div class="addressBox">
                    <i
                            class="fa-solid fa-map-location-dot"
                            style="color: #999999"
                    ></i>&nbsp
                    <div th:text="${list.address}">Í∞ÄÍ≤å Ï£ºÏÜå</div>
                </div>
                <div class="phoneBox">
                    <i class="fa-solid fa-phone" style="color: #878787"></i> &nbsp
                    <div th:text="${list.phoneNumber}">Í∞ÄÍ≤åÎ≤àÌò∏</div>
                </div>
                <div class="descBox">
                    <i class="fa-solid fa-store" style="color: #878787"></i>&nbsp
                    <div th:text="${list.storeDesc}">Í∞ÄÍ≤å ÏÑ§Î™Ö</div>
                </div>
            </div>
            <!--Î©îÎâ¥ Ïù¥Î¶Ñ/Ïù¥ÎØ∏ÏßÄ ÏóÜÏùÑ Í≤ΩÏö∞Ïóê Îú®ÏßÄ ÏïäÎèÑÎ°ù-->
            <div id="menu-container">
                Menu
                <hr/>
                <div class="imageName-box">
                    <div th:each="mList : ${mlist}" id="menuBox">
                        <img
                                th:src="@{|${mList.menuImagePath}|}"
                                alt="Î©îÎâ¥ Ïù¥ÎØ∏ÏßÄ"
                        />
                        <div th:text="${mList.menuName}">Î©îÎâ¥ Ïù¥Î¶Ñ</div>
                    </div>
                </div>
            </div>
            <div>Í∞ÄÍ≤å ÏúÑÏπò</div>
            <button
                    is="custom-recommendation"
                    data-userId="Ï∂îÏ≤úÌÖåÏä§Ìä∏Ïö©"
                    data-referenceType="S"
                    th:data-referenceId="${list.storeId}"
            ></button>

            <div id="map" style="width: 100%; height: 200px"></div>
            <script th:inline="javascript">
                /*<![CDATA[*/
                var container = document.getElementById('map');
                var options = {
                    center: new kakao.maps.LatLng(33.450701, 126.570667),
                    level: 3
                };
                var map = new kakao.maps.Map(container, options);
                var zoomControl = new kakao.maps.ZoomControl();
                map.addControl(zoomControl, kakao.maps.ControlPosition.RIGHT);
                var geocoder = new kakao.maps.services.Geocoder();
                geocoder.addressSearch([[${list.address}]], function(result, status){
                    if(status === kakao.maps.services.Status.OK){
                        var coords = new kakao.maps.LatLng(result[0].y, result[0].x);
                        var marker = new kakao.maps.Marker({
                            map: map,
                            position: coords
                        });
                        map.setCenter(coords);
                    }
                });

                /*]]>*/
            </script>
            <button
                    is="custom-recommendation"
                    th:if="${session.nowLogin != null}"
                    th:data-userId="${session.nowLogin}"
                    data-referenceType="S"
                    th:data-referenceId="${list.storeId}"
            ></button>
            <button
                    th:if="${session.nowLogin != null}"
                    th:onclick="'location.href=\'' + @{/review/write(storeId=${list.storeId})} + '\''"
            >Î¶¨Î∑∞ ÏûëÏÑ±</button
            ><br/>
            <custom-review th:data-storeId="${list.storeId}"></custom-review>
        </div>
    </div>
    <footer th:insert="ui/footer :: footer"></footer>
</div>
</body>
<script src="/js/recommendation.js"></script>
<script src="/js/review.js"></script>
</html>
